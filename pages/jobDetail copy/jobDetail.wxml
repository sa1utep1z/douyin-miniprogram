<!--pages/index/jobDetail/jobDetail.wxml-->
<wxs src="../../utils/util.wxs" module="util"></wxs>
<view class="box">
<view class="container" wx:if="{{detailBean!==null}}">
  <view class="swipe-view">
    <swiper indicator-dots = "{{detailBean.companyImages.length>1}}" autoplay interval="{{3000}}" indicator-color="rgba(255,255,255, .5)" indicator-active-color="#ffffff" style="height: 432rpx;">
      <block wx:for="{{detailBean.companyImages}}" wx:key="index">
        <swiper-item>
          <image class="swiper-item" src="{{item}}" bindtap="onBannerClick" data-bean="{{item}}"></image>
        </swiper-item>
      </block>
    </swiper>
  </view>
  <view class="job-view">
    <view class="job-price">{{detailBean.salaryStart}}-{{detailBean.salaryEnd}}元</view>
    <view class="job-tag-row">
      <view class="job-type-tag">{{detailBean.typeOfWork==='FORMAL_WORKER'?'正式工':'小时工'}}</view>
      <view class="job-des-tag">{{util.formatTags(detailBean.tags)}}</view>
    </view>
    <view class="job-title">{{detailBean.jobName}}</view>
    <view class="horizontal-divider"></view>
    <view class="job-action-row">
      <view class="job-des">
        <image class="job-des-icon" src="../../assets/images/index/icon_man.png"></image>
        <text class="job-des-text">招聘{{detailBean.wantedNum}}人</text>
      </view>
      <view class="job-divider"/>
      <view class="job-des">
        <image class="job-des-icon" src="../../assets/images/index/icon_time.png"/>
        <text class="job-des-text">{{util.formatTimeYMD(detailBean.orderDate)}}</text>
      </view>
    </view>
  </view>
  <view class="manager-view" wx:if="{{detailBean.recruiterInfo}}">
    <image class="manager-avatar" src="{{detailBean.avatar === ''||detailBean.avatar ===null?'../../assets/images/personal/img_head.png':detailBean.avatar}}"></image>
    <view class="manager-column">
      <view class="manager-name">{{detailBean.recruiterInfo.name}}</view>
      <view class="manager-company">众鼎直聘</view>
    </view>
    <view class="manager-phone" bindtap="handelPhoneCall">电话咨询</view>
    <view class="manager-wechat" bindtap="handelCopyWechat">添加微信</view>
  </view>
  <view class="detail-view">
    <view class="detail-view-title">岗位详情</view>
      <view class="detail-title">薪资待遇</view>
      <rich-text nodes="{{detailBean.treatment}}" space="nbsp" class="detail-content"/>
      <view class="detail-title" wx:if="{{detailBean.jobRequest}}">任职要求</view>
      <text class="detail-content" wx:if="{{detailBean.jobRequest}}">{{detailBean.jobRequest}}</text>
      <view class="detail-title">企业简介</view>
      <text class="detail-content" style="text-indent:2em">{{detailBean.companyIntroduction}}</text>
  </view>
  <view class="address-view">
    <view class="address-title">工作地点</view>
    <view class="address-row">
      <view class="address-column">
        <view class="address-content">{{detailBean.city}}{{detailBean.area}}{{detailBean.addressDetail}}</view>
        <view class="address-detail">
          <text class="address-detail-text">距你{{util.formatDistance(detailBean.distance)}}</text>
        </view>
      </view>
      <view class="address-nav" bindtap="handleNav" hover-class="common-hover-class">
        <image class="address-nav-icon" src="../../assets/images/index/icon_navgition.png"></image>
        <view class="address-nav-text">去这里</view>
      </view>
      </view>
  </view>
  <view class="float-view">
    <view class="float-column" bindtap="handleQuestion">
      <image class="float-icon" src="../../assets/images/index/icon_phone.png"></image>
      <text class="float-text">电话咨询</text>
    </view>
    <view class="float-column" bindtap="onShare">
      <image class="float-icon" src="../../assets/images/index/icon_share_gift.png"></image>
      <text class="float-text">分享有礼</text>
    </view>
    <view bindtap="handleRegister" class="float-button" hover-class="float-button-hover" hover-stay-time="100">立即报名</view>
  </view>
</view>
</view>
<SignUpInfo show="{{showSignDialog}}" position="{{jobId}}" bind:showSignInfo= "onChangeDialog"></SignUpInfo>
<van-popup
  show="{{ showShareDialog }}"
  position="bottom"
  custom-style="height: 350rpx;"
  bind:close="onClose"
  round
  >
<view class="share-container">
  <view class="share-title">邀请注册</view>
  <view class="dialog-share">
    <button open-type="share" class="btn-share" plain="{{true}}">
      <image src="https://labor-prod.oss-cn-shenzhen.aliyuncs.com/laborMgt/labor/miniProgram/icon_wx_logo.png" class="share-icon" />
      <view>微信好友</view>
    </button>
    <button  class="btn-share" bindtap="onCreateCode" plain="{{true}}">
      <image src="https://labor-prod.oss-cn-shenzhen.aliyuncs.com/laborMgt/labor/miniProgram/icon_linetime_logo.png" class="share-icon" />
      <view>保存图片</view>
    </button>
  </view>
</view>
</van-popup>