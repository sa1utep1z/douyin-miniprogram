<!--pages/index/jobDetail/jobDetail.wxml-->
<wxs src="../../utils/util.wxs" module="util"></wxs>
<view class="box">
<view class="container" wx:if="{{detailBean!==null}}">
  <view class="swipe-view">
    <swiper indicator-dots = "{{detailBean.companyImages.length>1}}" autoplay interval="{{3000}}" indicator-color="rgba(255,255,255, .5)" indicator-active-color="#ffffff" style="height: 432rpx;">
      <block wx:for="{{detailBean.companyImages}}" wx:key="index">
        <swiper-item>
          <image class="swiper-item" src="{{item}}" bindtap="onBannerClick" data-bean="{{item}}"></image>
        </swiper-item>
      </block>
    </swiper>
  </view>
  <view class="job-view">
    <view class="job-title">{{detailBean.jobName}}</view>
    <view class="horizontal-divider"></view>
    <view class="job-price-row">
      <view class="job-tip">综合薪资</view>
      <view class="job-price">{{detailBean.salaryStart}}-{{detailBean.salaryEnd}}元</view>
      <text class="job-des-text">{{util.formatTimeYMD(detailBean.orderDate)}}</text>
    </view>
    <view class="job-tag-row">
      <view class="job-type-tag">{{detailBean.typeOfWork==='FORMAL_WORKER'?'正式工':'小时工'}}</view>
      <view class="job-type-tag">招{{detailBean.wantedNum}}人</view>
      <view class="job-tag" wx:for="{{detailBean.tags}}" wx:key="index">{{item}}</view>
    </view>
  </view>
  <view class="manager-view" wx:if="{{detailBean.recruiterInfo}}" >
    <image class="manager-avatar" src="{{detailBean.recruiterInfo.avatar ===null?'../../assets/images/public/icon_default_head.png' : detailBean.recruiterInfo.avatar}}"></image>
    <view class="manager-column">
      <view class="manager-name">{{detailBean.recruiterInfo.name}}</view>
      <view class="manager-company">众鼎直聘</view>
    </view>
    <view class="manager-phone" bindtap="handelPhoneCall">电话咨询</view>
    <view class="manager-wechat" bindtap="handelCopyWechat">添加微信</view>
  </view>
  <view class="detail-block">
    <view class="detail-item-request">招聘要求</view>
    <view wx:for="{{detailBean.jobRequest}}" class="detail-item">
      <view class="detail-item-name">{{item.name}}</view>
      <view class="detail-item-value"><rich-text nodes="{{item.value}}" space="nbsp" /></view>
    </view>
  </view>
  <view class="detail-block">
    <view class="detail-item-request">岗位描述</view>
    <view wx:for="{{detailBean.positionDescribe}}" class="detail-item">
      <view class="detail-item-name">{{item.name}}</view>
      <view class="detail-item-value"><rich-text nodes="{{item.value}}" space="nbsp" /></view>
    </view>
  </view>
  <view class="detail-block">
    <view class="detail-item-request">薪资待遇</view>
    <view  class="detail-item">
      <view class="detail-item-name">发薪日</view>
      <view class="detail-item-value">{{detailBean.payday}}日</view>
    </view>
    <view  class="detail-item">
      <view class="detail-item-name">薪资详情</view>
      <view class="detail-item-value"><rich-text nodes="{{detailBean.treatment}}" space="nbsp" /></view>
    </view>
  </view>
  <view class="detail-block">
    <view class="detail-item-request">工作地点</view>
    <view  class="detail-item">
      <view class="detail-item-name">厂址</view>
      <view class="detail-item-value" bindtap="handleNav"><text style="color: #67B0F2;">{{detailBean.city}}{{detailBean.area}}{{detailBean.addressDetail}}</text></view>
    </view>
  </view>
  
  <view class="float-view">
    <view class="float-column" bindtap="handleQuestion">
      <image class="float-icon" src="../../assets/images/index/icon_phone.png"></image>
      <text class="float-text">电话咨询</text>
    </view>
    <view class="float-column" bindtap="onShare">
      <image class="float-icon" src="../../assets/images/index/icon_share_gift.png"></image>
      <text class="float-text">分享有礼</text>
    </view>
    <view bindtap="handleRegister" class="float-button" hover-class="float-button-hover" hover-stay-time="100">立即报名</view>
  </view>
</view>
</view>
<SignUpInfo show="{{showSignDialog}}" position="{{jobId}}" bind:showSignInfo= "onChangeDialog"></SignUpInfo>
<van-popup
  show="{{ showShareDialog }}"
  position="bottom"
  custom-style="height: 350rpx;"
  bind:close="onClose"
  round
  >
<view class="share-container">
  <view class="share-title">立即分享给好友</view>
  <view class="dialog-share">
    <button open-type="share" class="btn-share" plain="{{true}}">
      <image src="https://shanks-prod.oss-cn-shenzhen.aliyuncs.com/shanks-manager/labor/public/icon_wx_logo.png" class="share-icon"></image>
      <view>分享好友</view>
    </button>
    <button  class="btn-share" bindtap="onCreateCode" plain="{{true}}">
      <image src="https://shanks-prod.oss-cn-shenzhen.aliyuncs.com/shanks-manager/labor/public/icon_linetime_logo.png" class="share-icon"></image>
      <view>分享朋友圈</view>
    </button>
  </view>
</view>
</van-popup>